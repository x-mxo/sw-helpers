!function e(t,r,n){function s(i,a){if(!r[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(e){var r=t[i][1][e];return s(r||e)},l,l.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)s(n[i]);return s}({1:[function(e,t,r){"use strict";!function(){var t=e("../utils/mocha.js");"undefined"==typeof window?(self.goog=self.goog||{},self.goog.mochaUtils=self.goog.mochaUtils||t,self.addEventListener("message",function(e){switch(e.data){case"ready-check":e.ports[0].postMessage({ready:!0});break;case"start-tests":self.goog.mochaUtils.startInBrowserMochaTests().then(function(t){e.ports[0].postMessage(t)});break;default:e.ports[0].postMessage({error:"Unknown test name: "+e.data})}})):(window.goog=window.goog||{},window.goog.mochaUtils=window.goog.mochaUtils||t)}()},{"../utils/mocha.js":2}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return s(e,[{key:"startInBrowserMochaTests",value:function(){var e=this;return new Promise(function(t){var r=null,n=[],s=[],o=[];mocha.checkLeaks();var i=mocha.run();if(0===i.total)return void t({topLevelTitle:r,testResults:{raw:n,passed:s,failed:o}});i.on("pass",function(t){var r=e._getFriendlyTestResult(t);n.push(r),s.push(r)}).on("fail",function(t){var r=e._getFriendlyTestResult(t);n.push(r),o.push(r)}).on("end",function(){t({topLevelTitle:r,testResults:{raw:n,passed:s,failed:o}})}),0===mocha.suite.suites.length?t({topLevelTitle:r,testResults:{raw:n,passed:s,failed:o}}):r=mocha.suite.suites[0].title})}},{key:"registerServiceWorkerMochaTests",value:function(e){var t=function(e,t,r){return new Promise(function(n,s){var o=new MessageChannel;o.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[o.port2]),r&&setTimeout(function(){return s(new Error("Message Timeout"))},r)})};return window.goog.swUtils.activateSW(e).then(function(e){return e.contentWindow.navigator.serviceWorker.ready.then(function(e){return e.active}).then(function(e){return t(e,"ready-check",400).then(function(t){return t.ready?e:Promise.reject()}).catch(function(){throw new Error("Service worker failed to respond to the ready check. Have you imported browser/mocha-utils.js in the SW?")})}).then(function(e){return t(e,"start-tests")}).then(function(e){if(!e.testResults)throw new Error("Unexpected test result: "+e);e.testResults.raw.length>0&&describe&&describe("[SW Internal Results] "+e.topLevelTitle,function(){e.testResults.raw.forEach(function(e){it(e.title,function(){if("passed"!==e.state){var t=new Error(e.errMessage);throw t.stack=e.stack,t}})})})})})}},{key:"startWebDriverMochaTests",value:function(e,t,r){return t.get(r).then(function(){return t.wait(function(){return t.executeScript(function(){return void 0!==window.testsuite&&void 0!==window.testsuite.testResults})})}).then(function(){return t.executeScript(function(){return window.testsuite.testResults})})}},{key:"_getFriendlyTestResult",value:function(e){var t={parentTitle:e.parent.title,title:e.title,state:e.state};return e.err&&(t.errMessage=e.err.message,t.stack=e.err.stack),t}},{key:"prettyPrintResults",value:function(e){var t="";return e.raw.forEach(function(e){var r="";switch(e.state){case"passed":r+="✔️ [Passed] ";break;case"failed":r+="❌ [Failed] ";break;default:r+="❓ [Unknown] "}if(r+=e.parentTitle+" > "+e.title+"\n","failed"===e.state){var n=e.stack.split("\n").join("\n    ");r+="\n    "+e.errMessage+"\n\n",r+="    [Stack Trace]\n",r+="    "+n+"\n"}t+=r+"\n"}),t}}]),e}();if(void 0===t||void 0===t.exports)throw new Error("To use MochaUtils in the browser please use the browser/mocha-utils.js file");t.exports=new o},{}]},{},[1]);
//# sourceMappingURL=mocha-utils.js.map
