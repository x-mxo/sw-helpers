{"version":3,"sources":["index.js"],"names":["exports","module","factory","define","amd","global","goog","routing","createCommonjsModule","fn","throwError","Error","message","errorStackParser","parse","error","length","stackFrames","functionName","replace","name","normalizeHandler","handler","assert","hasMethod","isType","handle","options","delimiter","PATH_REGEXP","exec","str","res","index","slice","offset","m","escaped","path","tokens","push","defaultDelimiter","capture","group","prefix","optional","repeat","partial","next","asterisk","pattern","escapeGroup","escapeString","substr","encodeURIComponentPretty","encodeURI","c","charCodeAt","toString","toUpperCase","encodeAsterisk","tokensToFunction","Array","i","matches","RegExp","obj","opts","pretty","encodeURIComponent","token","data","TypeError","index$1","value","JSON","stringify","j","encode","test","segment","attachKeys","re","keys","flags","sensitive","regexpToRegexp","source","match","groups","arrayToRegexp","parts","pathToRegexp","join","regexp","stringToRegexp","tokensToRegExp","strict","end","route","endsWithDelimiter","ErrorFactory$1","constructor","_errors","errors","createError","thrownError","stack","generatedError","window","self","commonjsGlobal","_isNumber","isNaN","parseFloat","n","isFinite","_capitalize","substring","_getter","p","StackFrame","Object","booleanProps","concat","numericProps","stringProps","arrayProps","props","hasOwnProperty","prototype","getArgs","args","setArgs","call","v","getEvalOrigin","evalOrigin","setEvalOrigin","getFunctionName","getFileName","getLineNumber","getColumnNumber","fileName","lineNumber","columnNumber","k","stackframe","ErrorStackParser","ErrorStackParser$$parse","stacktrace","parseOpera","CHROME_IE_STACK_REGEXP","parseV8OrIE","parseFFOrSafari","extractLocation","ErrorStackParser$$extractLocation","indexOf","urlLike","regExp","ErrorStackParser$$parseV8OrIE","split","filter","line","filtered","map","pop","locationParts","ErrorStackParser$$parseFFOrSafari","SAFARI_NATIVE_CODE_REGEXP","ErrorStackParser$$parseOpera","e","parseOpera9","parseOpera11","parseOpera10","ErrorStackParser$$parseOpera9","lines","len","lineRE","result","ErrorStackParser$$parseOpera10","ErrorStackParser$$parseOpera11","FIREFOX_SAFARI_STACK_REGEXP","shift","functionCall","argsRaw","atLeastOne","object","parameters","some","parameter","expectedMethod","isInstance","expectedClass","isOneOf","values","includes","actualType","expectedType","isSWEnv","ServiceWorkerGlobalScope","isValue","actualValue","expectedValue","isArrayOfType","isArray","item","isArrayOfClass","Route","method","validMethods","arr","compile","LogGroup","title","isPrimary","_isPrimary","_groupTitle","_logs","_childGroups","_isFirefox","navigator","userAgent","_isEdge","addLog","logDetails","addChildGroup","print","_printEdgeFriendly","_openGroup","forEach","_printLogDetails","_closeGroup","logArgs","logFunc","console","log","colors","allArguments","groupCollapsed","groupEnd","LOG_LEVEL","none","verbose","debug","warn","LogHelper","_defaultLogLevel","hostname","_printMessage","_shouldLogMessage","logLevel","logOptions","_getAllLogGroups","logGroups","_getPrimaryMessageDetails","topLogGroup","primaryMessage","errorMessage","that","extraInfoGroup","_getKeyValueDetails","className","keyName","key","LIGHT_BLUE","LIGHT_GREY","LIGHT_GREEN","LIGHT_YELLOW","LIGHT_RED","logLevelName","logLevelColor","primaryLogColors","DARK_GREY","primaryLogMessage","minValidLogLevel","ExpressRoute","startsWith","ErrorFactory","url","origin","location","pathname","href","pathNameOrHref","regexpMatches","namedParamsToValues","index$$1","NavigationRoute","whitelist","blacklist","event","request","mode","logHelper","matched","RegExpRoute","Router","handleFetch","_routes","Map","_addFetchListener","addEventListener","URL","protocol","get","matchResult","matchingRoute","params","responsePromise","defaultHandler","catchHandler","catch","respondWith","then","response","setDefaultHandler","setCatchHandler","registerRoutes","routes","has","set","unshift","registerRoute","defineProperty"],"mappings":"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","file":"sw-routing.min.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.goog = global.goog || {}, global.goog.routing = global.goog.routing || {})));\n}(this, (function (exports) { 'use strict';\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * A simple class to make errors and to help with testing.\n */\n\nclass ErrorFactory$1 {\n  /**\n   * @param {Object} errors A object containing key value pairs where the key\n   * is the error name / ID and the value is the error message.\n   */\n  constructor(errors) {\n    this._errors = errors;\n  }\n  /**\n   * @param {string} name The error name to be generated.\n   * @param {Error} [thrownError] The thrown error that resulted in this\n   * message.\n   * @return {Error} The generated error.\n   */\n  createError(name, thrownError) {\n    if (!(name in this._errors)) {\n      throw new Error(`Unable to generate error '${name}'.`);\n    }\n\n    let message = this._errors[name].replace(/\\s+/g, ' ');\n    let stack = null;\n    if (thrownError) {\n      message += ` [${thrownError.message}]`;\n      stack = thrownError.stack;\n    }\n\n    const generatedError = new Error();\n    generatedError.name = name;\n    generatedError.message = message;\n    generatedError.stack = stack;\n    return generatedError;\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nconst errors = {\n    'express-route-invalid-path': `When using ExpressRoute, you must\n    provide a path that starts with a '/' character (to match same-origin\n    requests) or that starts with 'http' (to match cross-origin requests)`\n};\n\nvar ErrorFactory = new ErrorFactory$1(errors);\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar stackframe = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined('stackframe', [], factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n    'use strict';\n    function _isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function _capitalize(str) {\n        return str[0].toUpperCase() + str.substring(1);\n    }\n\n    function _getter(p) {\n        return function () {\n            return this[p];\n        };\n    }\n\n    var booleanProps = ['isConstructor', 'isEval', 'isNative', 'isToplevel'];\n    var numericProps = ['columnNumber', 'lineNumber'];\n    var stringProps = ['fileName', 'functionName', 'source'];\n    var arrayProps = ['args'];\n\n    function StackFrame(obj) {\n        if (obj instanceof Object) {\n            var props = booleanProps.concat(numericProps.concat(stringProps.concat(arrayProps)));\n            for (var i = 0; i < props.length; i++) {\n                if (obj.hasOwnProperty(props[i]) && obj[props[i]] !== undefined) {\n                    this['set' + _capitalize(props[i])](obj[props[i]]);\n                }\n            }\n        }\n    }\n\n    StackFrame.prototype = {\n        getArgs: function () {\n            return this.args;\n        },\n        setArgs: function (v) {\n            if (Object.prototype.toString.call(v) !== '[object Array]') {\n                throw new TypeError('Args must be an Array');\n            }\n            this.args = v;\n        },\n\n        getEvalOrigin: function () {\n            return this.evalOrigin;\n        },\n        setEvalOrigin: function (v) {\n            if (v instanceof StackFrame) {\n                this.evalOrigin = v;\n            } else if (v instanceof Object) {\n                this.evalOrigin = new StackFrame(v);\n            } else {\n                throw new TypeError('Eval Origin must be an Object or StackFrame');\n            }\n        },\n\n        toString: function () {\n            var functionName = this.getFunctionName() || '{anonymous}';\n            var args = '(' + (this.getArgs() || []).join(',') + ')';\n            var fileName = this.getFileName() ? ('@' + this.getFileName()) : '';\n            var lineNumber = _isNumber(this.getLineNumber()) ? (':' + this.getLineNumber()) : '';\n            var columnNumber = _isNumber(this.getColumnNumber()) ? (':' + this.getColumnNumber()) : '';\n            return functionName + args + fileName + lineNumber + columnNumber;\n        }\n    };\n\n    for (var i = 0; i < booleanProps.length; i++) {\n        StackFrame.prototype['get' + _capitalize(booleanProps[i])] = _getter(booleanProps[i]);\n        StackFrame.prototype['set' + _capitalize(booleanProps[i])] = (function (p) {\n            return function (v) {\n                this[p] = Boolean(v);\n            };\n        })(booleanProps[i]);\n    }\n\n    for (var j = 0; j < numericProps.length; j++) {\n        StackFrame.prototype['get' + _capitalize(numericProps[j])] = _getter(numericProps[j]);\n        StackFrame.prototype['set' + _capitalize(numericProps[j])] = (function (p) {\n            return function (v) {\n                if (!_isNumber(v)) {\n                    throw new TypeError(p + ' must be a Number');\n                }\n                this[p] = Number(v);\n            };\n        })(numericProps[j]);\n    }\n\n    for (var k = 0; k < stringProps.length; k++) {\n        StackFrame.prototype['get' + _capitalize(stringProps[k])] = _getter(stringProps[k]);\n        StackFrame.prototype['set' + _capitalize(stringProps[k])] = (function (p) {\n            return function (v) {\n                this[p] = String(v);\n            };\n        })(stringProps[k]);\n    }\n\n    return StackFrame;\n}));\n});\n\nvar errorStackParser = createCommonjsModule(function (module, exports) {\n(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined('error-stack-parser', ['stackframe'], factory);\n    } else {\n        module.exports = factory(stackframe);\n    }\n}(commonjsGlobal, function ErrorStackParser(StackFrame) {\n    'use strict';\n\n    var FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+\\:\\d+/;\n    var CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m;\n    var SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code\\])?$/;\n\n    return {\n        /**\n         * Given an Error object, extract the most information from it.\n         *\n         * @param {Error} error object\n         * @return {Array} of StackFrames\n         */\n        parse: function ErrorStackParser$$parse(error) {\n            if (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n                return this.parseOpera(error);\n            } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n                return this.parseV8OrIE(error);\n            } else if (error.stack) {\n                return this.parseFFOrSafari(error);\n            } else {\n                throw new Error('Cannot parse given Error object');\n            }\n        },\n\n        // Separate line and column numbers from a string of the form: (URI:Line:Column)\n        extractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n            // Fail-fast but return locations like \"(native)\"\n            if (urlLike.indexOf(':') === -1) {\n                return [urlLike];\n            }\n\n            var regExp = /(.+?)(?:\\:(\\d+))?(?:\\:(\\d+))?$/;\n            var parts = regExp.exec(urlLike.replace(/[\\(\\)]/g, ''));\n            return [parts[1], parts[2] || undefined, parts[3] || undefined];\n        },\n\n        parseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(CHROME_IE_STACK_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                if (line.indexOf('(eval ') > -1) {\n                    // Throw away eval information until we implement stacktrace.js/stackframe#8\n                    line = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g, '');\n                }\n                var tokens = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(').split(/\\s+/).slice(1);\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionName = tokens.join(' ') || undefined;\n                var fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1 ? undefined : locationParts[0];\n\n                return new StackFrame({\n                    functionName: functionName,\n                    fileName: fileName,\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        },\n\n        parseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                // Throw away eval information until we implement stacktrace.js/stackframe#8\n                if (line.indexOf(' > eval') > -1) {\n                    line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g, ':$1');\n                }\n\n                if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                    // Safari eval frames only have function names and nothing else\n                    return new StackFrame({\n                        functionName: line\n                    });\n                } else {\n                    var tokens = line.split('@');\n                    var locationParts = this.extractLocation(tokens.pop());\n                    var functionName = tokens.join('@') || undefined;\n\n                    return new StackFrame({\n                        functionName: functionName,\n                        fileName: locationParts[0],\n                        lineNumber: locationParts[1],\n                        columnNumber: locationParts[2],\n                        source: line\n                    });\n                }\n            }, this);\n        },\n\n        parseOpera: function ErrorStackParser$$parseOpera(e) {\n            if (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n                return this.parseOpera9(e);\n            } else if (!e.stack) {\n                return this.parseOpera10(e);\n            } else {\n                return this.parseOpera11(e);\n            }\n        },\n\n        parseOpera9: function ErrorStackParser$$parseOpera9(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n            var lines = e.message.split('\\n');\n            var result = [];\n\n            for (var i = 2, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(new StackFrame({\n                        fileName: match[2],\n                        lineNumber: match[1],\n                        source: lines[i]\n                    }));\n                }\n            }\n\n            return result;\n        },\n\n        parseOpera10: function ErrorStackParser$$parseOpera10(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n            var lines = e.stacktrace.split('\\n');\n            var result = [];\n\n            for (var i = 0, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(\n                        new StackFrame({\n                            functionName: match[3] || undefined,\n                            fileName: match[2],\n                            lineNumber: match[1],\n                            source: lines[i]\n                        })\n                    );\n                }\n            }\n\n            return result;\n        },\n\n        // Opera 10.65+ Error.stack very similar to FF/Safari\n        parseOpera11: function ErrorStackParser$$parseOpera11(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n            }, this);\n\n            return filtered.map(function(line) {\n                var tokens = line.split('@');\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionCall = (tokens.shift() || '');\n                var functionName = functionCall\n                        .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                        .replace(/\\([^\\)]*\\)/g, '') || undefined;\n                var argsRaw;\n                if (functionCall.match(/\\(([^\\)]*)\\)/)) {\n                    argsRaw = functionCall.replace(/^[^\\(]+\\(([^\\)]*)\\)$/, '$1');\n                }\n                var args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n                    undefined : argsRaw.split(',');\n\n                return new StackFrame({\n                    functionName: functionName,\n                    args: args,\n                    fileName: locationParts[0],\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        }\n    };\n}));\n});\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/* eslint-disable require-jsdoc */\n\nfunction atLeastOne(object) {\n  const parameters = Object.keys(object);\n  if (!parameters.some(parameter => object[parameter] !== undefined)) {\n    throwError('Please set at least one of the following parameters: ' + parameters.map(p => `'${p}'`).join(', '));\n  }\n}\n\nfunction hasMethod(object, expectedMethod) {\n  const parameter = Object.keys(object).pop();\n  const type = typeof object[parameter][expectedMethod];\n  if (type !== 'function') {\n    throwError(`The '${parameter}' parameter must be an object that exposes a\n      '${expectedMethod}' method.`);\n  }\n}\n\nfunction isInstance(object, expectedClass) {\n  const parameter = Object.keys(object).pop();\n  if (!(object[parameter] instanceof expectedClass)) {\n    throwError(`The '${parameter}' parameter must be an instance of\n      '${expectedClass.name}'`);\n  }\n}\n\nfunction isOneOf(object, values) {\n  const parameter = Object.keys(object).pop();\n  if (!values.includes(object[parameter])) {\n    throwError(`The '${parameter}' parameter must be set to one of the\n      following: ${values}`);\n  }\n}\n\nfunction isType(object, expectedType) {\n  const parameter = Object.keys(object).pop();\n  const actualType = typeof object[parameter];\n  if (actualType !== expectedType) {\n    throwError(`The '${parameter}' parameter has the wrong type. (Expected:\n      ${expectedType}, actual: ${actualType})`);\n  }\n}\n\nfunction isArrayOfType(object, expectedType) {\n  const parameter = Object.keys(object).pop();\n  const message = `The '${parameter}' parameter should be an array containing\n    one or more '${expectedType}' elements.`;\n\n  if (!Array.isArray(object[parameter])) {\n    throwError(message);\n  }\n\n  for (let item of object[parameter]) {\n    if (typeof item !== expectedType) {\n      throwError(message);\n    }\n  }\n}\n\nfunction isArrayOfClass(object, expectedClass) {\n  const parameter = Object.keys(object).pop();\n  const message = `The '${parameter}' parameter should be an array containing\n    one or more '${expectedClass.name}' instances.`;\n\n  if (!Array.isArray(object[parameter])) {\n    throwError(message);\n  }\n\n  for (let item of object[parameter]) {\n    if (!(item instanceof expectedClass)) {\n      throwError(message);\n    }\n  }\n}\n\nfunction isSWEnv() {\n  return 'ServiceWorkerGlobalScope' in self && self instanceof ServiceWorkerGlobalScope;\n}\n\nfunction isValue(object, expectedValue) {\n  const parameter = Object.keys(object).pop();\n  const actualValue = object[parameter];\n  if (actualValue !== expectedValue) {\n    throwError(`The '${parameter}' parameter has the wrong value. (Expected: \n      ${expectedValue}, actual: ${actualValue})`);\n  }\n}\n\nfunction throwError(message) {\n  const error = new Error(message);\n  const stackFrames = errorStackParser.parse(error);\n\n  // If, for some reason, we don't have all the stack information we need,\n  // we'll just end up throwing a basic Error.\n  if (stackFrames.length >= 3) {\n    // Assuming we have the stack frames, set the message to include info\n    // about what the underlying method was, and set the name to reflect\n    // the assertion type that failed.\n    error.message = `Invalid call to ${stackFrames[2].functionName}()  ` + message.replace(/\\s+/g, ' ');\n    error.name = stackFrames[1].functionName.replace(/^Object\\./, '');\n  }\n\n  throw error;\n}\n\nvar assert = {\n  atLeastOne,\n  hasMethod,\n  isInstance,\n  isOneOf,\n  isType,\n  isSWEnv,\n  isValue,\n  isArrayOfType,\n  isArrayOfClass\n};\n\n/**\n * @param {RouteHandler} handler The handler to normalize.\n * @return {Object} An object with a `handle` property representing the handler\n * function.\n */\nfunction normalizeHandler(handler) {\n  if (typeof handler === 'object') {\n    assert.hasMethod({ handler }, 'handle');\n    return handler;\n  } else {\n    assert.isType({ handler }, 'function');\n    return { handle: handler };\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * The default HTTP method, 'GET', used when there's no specific method\n * configured for a route.\n *\n * @private\n * @type {string}\n * @memberof module:sw-routing\n */\nconst defaultMethod = 'GET';\n\n/**\n * The list of valid HTTP methods associated with requests that could be routed.\n *\n * @private\n * @type {Array.<string>}\n * @memberof module:sw-routing\n */\nconst validMethods = ['DELETE', 'GET', 'HEAD', 'POST', 'PUT'];\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * A `Route` allows you to tell a service worker that it should handle\n * certain network requests using a specific response strategy.\n *\n * Instead of implementing your own handlers, you can use one of the\n * pre-defined runtime caching strategies from the\n * {@link module:sw-runtime-caching|sw-runtime-caching} module.\n *\n * While you can use `Route` directly, the\n * {@link module:sw-routing.RegExpRoute|RegExpRoute}\n * and {@link module:sw-routing.ExpressRoute|ExpressRoute} subclasses provide a\n * convenient wrapper with a nicer interface for using regular expressions or\n * Express-style routes as the `match` criteria.\n *\n * @example\n * // Any navigate requests for URLs that start with /path/to/ will match.\n * const route = new goog.routing.Route({\n *   match: ({url, event}) => {\n *     return event.request.mode === 'navigate' &&\n *            url.pathname.startsWith('/path/to/');\n *   },\n *   handler: ({event}) => {\n *     // Do something that returns a Promise.<Response>, like:\n *     return caches.match(event.request);\n *   },\n * });\n *\n * const router = new goog.routing.Router();\n * router.registerRoute({route});\n *\n * @memberof module:sw-routing\n */\nclass Route {\n  /**\n   * Constructor for Route class.\n   * @param {Object} input\n   * @param {function} input.match The function that determines whether the\n   * route matches. The function is passed an object with two properties:\n   * `url`, which is a [URL](https://developer.mozilla.org/en-US/docs/Web/API/URL),\n   * and `event`, which is a [FetchEvent](https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent).\n   * `match` should return a truthy value when the route applies, and\n   * that value is passed on to the handle function.\n   * @param {module:sw-routing.RouteHandler} input.handler The handler to use to\n   * provide a response if the route matches.\n   * @param {string} [input.method] Only match requests that use this\n   * HTTP method. Defaults to `'GET'` if not specified.\n   */\n  constructor({ match, handler, method } = {}) {\n    this.handler = normalizeHandler(handler);\n\n    assert.isType({ match }, 'function');\n    this.match = match;\n\n    if (method) {\n      assert.isOneOf({ method }, validMethods);\n      this.method = method;\n    } else {\n      this.method = defaultMethod;\n    }\n  }\n}\n\nvar index$1 = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n/**\n * Expose `pathToRegexp`.\n */\nvar index = pathToRegexp;\nvar parse_1 = parse;\nvar compile_1 = compile;\nvar tokensToFunction_1 = tokensToFunction;\nvar tokensToRegExp_1 = tokensToRegExp;\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g');\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {string}  str\n * @param  {Object=} options\n * @return {!Array}\n */\nfunction parse (str, options) {\n  var tokens = [];\n  var key = 0;\n  var index = 0;\n  var path = '';\n  var defaultDelimiter = options && options.delimiter || '/';\n  var res;\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0];\n    var escaped = res[1];\n    var offset = res.index;\n    path += str.slice(index, offset);\n    index = offset + m.length;\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1];\n      continue\n    }\n\n    var next = str[index];\n    var prefix = res[2];\n    var name = res[3];\n    var capture = res[4];\n    var group = res[5];\n    var modifier = res[6];\n    var asterisk = res[7];\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path);\n      path = '';\n    }\n\n    var partial = prefix != null && next != null && next !== prefix;\n    var repeat = modifier === '+' || modifier === '*';\n    var optional = modifier === '?' || modifier === '*';\n    var delimiter = res[2] || defaultDelimiter;\n    var pattern = capture || group;\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      partial: partial,\n      asterisk: !!asterisk,\n      pattern: pattern ? escapeGroup(pattern) : (asterisk ? '.*' : '[^' + escapeString(delimiter) + ']+?')\n    });\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index);\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path);\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {string}             str\n * @param  {Object=}            options\n * @return {!function(Object=, Object=)}\n */\nfunction compile (str, options) {\n  return tokensToFunction(parse(str, options))\n}\n\n/**\n * Prettier encoding of URI path segments.\n *\n * @param  {string}\n * @return {string}\n */\nfunction encodeURIComponentPretty (str) {\n  return encodeURI(str).replace(/[\\/?#]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n/**\n * Encode the asterisk parameter. Similar to `pretty`, but allows slashes.\n *\n * @param  {string}\n * @return {string}\n */\nfunction encodeAsterisk (str) {\n  return encodeURI(str).replace(/[?#]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length);\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^(?:' + tokens[i].pattern + ')$');\n    }\n  }\n\n  return function (obj, opts) {\n    var path = '';\n    var data = obj || {};\n    var options = opts || {};\n    var encode = options.pretty ? encodeURIComponentPretty : encodeURIComponent;\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === 'string') {\n        path += token;\n\n        continue\n      }\n\n      var value = data[token.name];\n      var segment;\n\n      if (value == null) {\n        if (token.optional) {\n          // Prepend partial segment prefixes.\n          if (token.partial) {\n            path += token.prefix;\n          }\n\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (index$1(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received `' + JSON.stringify(value) + '`')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encode(value[j]);\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received `' + JSON.stringify(segment) + '`')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment;\n        }\n\n        continue\n      }\n\n      segment = token.asterisk ? encodeAsterisk(value) : encode(value);\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment;\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {string} str\n * @return {string}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/\\\\])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {string} group\n * @return {string}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {!RegExp} re\n * @param  {Array}   keys\n * @return {!RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys;\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {string}\n */\nfunction flags (options) {\n  return options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {!RegExp} path\n * @param  {!Array}  keys\n * @return {!RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        partial: false,\n        asterisk: false,\n        pattern: null\n      });\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {!Array}  path\n * @param  {Array}   keys\n * @param  {!Object} options\n * @return {!RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source);\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {string}  path\n * @param  {!Array}  keys\n * @param  {!Object} options\n * @return {!RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  return tokensToRegExp(parse(path, options), keys, options)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {!Array}          tokens\n * @param  {(Array|Object)=} keys\n * @param  {Object=}         options\n * @return {!RegExp}\n */\nfunction tokensToRegExp (tokens, keys, options) {\n  if (!index$1(keys)) {\n    options = /** @type {!Object} */ (keys || options);\n    keys = [];\n  }\n\n  options = options || {};\n\n  var strict = options.strict;\n  var end = options.end !== false;\n  var route = '';\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (typeof token === 'string') {\n      route += escapeString(token);\n    } else {\n      var prefix = escapeString(token.prefix);\n      var capture = '(?:' + token.pattern + ')';\n\n      keys.push(token);\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*';\n      }\n\n      if (token.optional) {\n        if (!token.partial) {\n          capture = '(?:' + prefix + '(' + capture + '))?';\n        } else {\n          capture = prefix + '(' + capture + ')?';\n        }\n      } else {\n        capture = prefix + '(' + capture + ')';\n      }\n\n      route += capture;\n    }\n  }\n\n  var delimiter = escapeString(options.delimiter || '/');\n  var endsWithDelimiter = route.slice(-delimiter.length) === delimiter;\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithDelimiter ? route.slice(0, -delimiter.length) : route) + '(?:' + delimiter + '(?=$))?';\n  }\n\n  if (end) {\n    route += '$';\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithDelimiter ? '' : '(?=' + delimiter + '|$)';\n  }\n\n  return attachKeys(new RegExp('^' + route, flags(options)), keys)\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(string|RegExp|Array)} path\n * @param  {(Array|Object)=}       keys\n * @param  {Object=}               options\n * @return {!RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  if (!index$1(keys)) {\n    options = /** @type {!Object} */ (keys || options);\n    keys = [];\n  }\n\n  options = options || {};\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, /** @type {!Array} */ (keys))\n  }\n\n  if (index$1(path)) {\n    return arrayToRegexp(/** @type {!Array} */ (path), /** @type {!Array} */ (keys), options)\n  }\n\n  return stringToRegexp(/** @type {string} */ (path), /** @type {!Array} */ (keys), options)\n}\n\nindex.parse = parse_1;\nindex.compile = compile_1;\nindex.tokensToFunction = tokensToFunction_1;\nindex.tokensToRegExp = tokensToRegExp_1;\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * `ExpressRoute` is a helper class to make defining Express-style\n * [Routes]{@link Route} easy.\n *\n * Under the hood, it uses the [`path-to-regexp`](https://www.npmjs.com/package/path-to-regexp)\n * library to transform the `path` parameter into a regular expression, which is\n * then matched against the URL's path.\n *\n * Please note that `ExpressRoute` can match either same-origin or cross-origin\n * requests. To match only same-origin requests, use a `path` value that begins\n * with `'/'`, e.g. `'/path/to/:file'`. To match cross-origin requests, use\n * a `path` value that includes the origin, e.g.\n * `'https://example.com/path/to/:file'`.\n *\n * @example\n * // Any same-origin requests that start with /path/to and end with one\n * // additional path segment will match this route, with the last path\n * // segment passed along to the handler via params.file.\n * const route = new goog.routing.ExpressRoute({\n *   path: '/path/to/:file',\n *   handler: ({event, params}) => {\n *     // params.file will be set based on the request URL that matched.\n *     return caches.match(params.file);\n *   },\n * });\n *\n * const router = new goog.routing.Router();\n * router.registerRoute({route});\n *\n * @example\n * // Any cross-origin requests for https://example.com will match this route.\n * const route = new goog.routing.ExpressRoute({\n *   path: 'https://example.com/path/to/:file',\n *   handler: ({event}) => return caches.match(event.request),\n * });\n *\n * const router = new goog.routing.Router();\n * router.registerRoute({route});\n *\n * @memberof module:sw-routing\n * @extends Route\n */\nclass ExpressRoute extends Route {\n  /**\n   * Constructor for ExpressRoute.\n   *\n   * @param {Object} input\n   * @param {String} input.path The path to use for routing.\n   * If the path contains [named parameters](https://github.com/pillarjs/path-to-regexp#named-parameters),\n   * then an Object that maps parameter names to their corresponding value\n   * will be passed to the handler via `params`.\n   * @param {module:sw-routing.RouteHandler} input.handler The handler to use to\n   * provide a response if the route matches.\n   * @param {string} [input.method] Only match requests that use this\n   * HTTP method. Defaults to `'GET'` if not specified.\n   */\n  constructor({ path, handler, method }) {\n    if (!(path.startsWith('/') || path.startsWith('http'))) {\n      throw ErrorFactory.createError('express-route-invalid-path');\n    }\n\n    let keys = [];\n    // keys is populated as a side effect of pathToRegExp. This isn't the nicest\n    // API, but so it goes.\n    // https://github.com/pillarjs/path-to-regexp#usage\n    const regExp = index(path, keys);\n    const match = ({ url }) => {\n      // A path starting with '/' is a signal that we only want to match\n      // same-origin. Bail out early if needed.\n      if (path.startsWith('/') && url.origin !== location.origin) {\n        return null;\n      }\n\n      // We need to match on either just the pathname or the full URL, depending\n      // on whether the path parameter starts with '/' or 'http'.\n      const pathNameOrHref = path.startsWith('/') ? url.pathname : url.href;\n      const regexpMatches = pathNameOrHref.match(regExp);\n      // Return null immediately if this route doesn't match.\n      if (!regexpMatches) {\n        return null;\n      }\n\n      // If the route does match, then collect values for all the named\n      // parameters that were returned in keys.\n      // If there are no named parameters then this will end up returning {},\n      // which is truthy, and therefore a sufficient return value.\n      const namedParamsToValues = {};\n      keys.forEach((key, index$$1) => {\n        namedParamsToValues[key.name] = regexpMatches[index$$1 + 1];\n      });\n\n      return namedParamsToValues;\n    };\n\n    super({ match, handler, method });\n  }\n}\n\n/* eslint-disable no-console */\n\n/**\n * A simple helper to manage the print of a set of logs\n */\nclass LogGroup {\n  /**\n   * @param {object} input\n   * @param {string} input.title\n   * @param {boolean} input.isPrimary\n   */\n  constructor({ title, isPrimary } = {}) {\n    this._isPrimary = isPrimary || false;\n    this._groupTitle = title || '';\n    this._logs = [];\n    this._childGroups = [];\n\n    this._isFirefox = false;\n    if (/Firefox\\/\\d*\\.\\d*/.exec(navigator.userAgent)) {\n      this._isFirefox = true;\n    }\n\n    this._isEdge = false;\n    if (/Edge\\/\\d*\\.\\d*/.exec(navigator.userAgent)) {\n      this._isEdge = true;\n    }\n  }\n\n  /**\n   *@param {object} logDetails\n   */\n  addLog(logDetails) {\n    this._logs.push(logDetails);\n  }\n\n  /**\n   * @param {object} group\n   */\n  addChildGroup(group) {\n    if (group._logs.length === 0) {\n      return;\n    }\n\n    this._childGroups.push(group);\n  }\n\n  /**\n   * prints out this log group to the console.\n   */\n  print() {\n    if (this._isEdge) {\n      return this._printEdgeFriendly();\n    }\n\n    this._openGroup();\n\n    this._logs.forEach(logDetails => {\n      this._printLogDetails(logDetails);\n    });\n\n    this._childGroups.forEach(group => {\n      group.print();\n    });\n\n    this._closeGroup();\n  }\n\n  _printEdgeFriendly() {\n    // Edge has no support for colors at all and poor support for groups.\n    this._logs.forEach((logDetails, index) => {\n      // Message can be an object - i.e. an error.\n      let message = logDetails.message;\n      if (typeof message === 'string') {\n        // Replace the %c value with an empty string.\n        message = message.replace(/%c/g, '');\n      }\n      const logArgs = [message];\n      if (logDetails.error) {\n        logArgs.push(logDetails.error);\n      }\n      if (logDetails.args) {\n        logArgs.push(logDetails.args);\n      }\n      const logFunc = logDetails.logFunc || console.log;\n      logFunc(...logArgs);\n    });\n\n    this._childGroups.forEach((group, index) => {\n      group.print();\n    });\n  }\n\n  /**\n   * Prints the specific logDetails object.\n   * @param {object} logDetails\n   */\n  _printLogDetails(logDetails) {\n    const logFunc = logDetails.logFunc ? logDetails.logFunc : console.log;\n    let message = logDetails.message;\n    let allArguments = [message];\n    if (logDetails.colors && !this._isEdge) {\n      allArguments = allArguments.concat(logDetails.colors);\n    }\n    if (logDetails.args) {\n      allArguments = allArguments.concat(logDetails.args);\n    }\n    logFunc(...allArguments);\n  }\n\n  /**\n   * Opens a console group - managing differences in Firefox.\n   */\n  _openGroup() {\n    if (this._isPrimary) {\n      // Only start a group is there are child groups\n      if (this._childGroups.length === 0) {\n        return;\n      }\n\n      const logDetails = this._logs.shift();\n      if (this._isFirefox) {\n        // Firefox doesn't support colors logs in console.group.\n        this._printLogDetails(logDetails);\n        return;\n      }\n\n      // Print the colored message with console.group\n      logDetails.logFunc = console.group;\n      this._printLogDetails(logDetails);\n    } else {\n      console.groupCollapsed(this._groupTitle);\n    }\n  }\n\n  /**\n   * Closes a console group\n   */\n  _closeGroup() {\n    // Only close a group if there was a child group opened\n    if (this._isPrimary && this._childGroups.length === 0) {\n      return;\n    }\n\n    console.groupEnd();\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/* eslint-disable no-console */\n\nself.goog = self.goog || {};\nself.goog.LOG_LEVEL = self.goog.LOG_LEVEL || {\n  none: -1,\n  verbose: 0,\n  debug: 1,\n  warn: 2,\n  error: 3\n};\n\nconst LIGHT_GREY = `#bdc3c7`;\nconst DARK_GREY = `#7f8c8d`;\nconst LIGHT_GREEN = `#2ecc71`;\nconst LIGHT_YELLOW = `#f1c40f`;\nconst LIGHT_RED = `#e74c3c`;\nconst LIGHT_BLUE = `#3498db`;\n\n/**\n * A class that will only log given the current log level\n * defined by the developer.\n *\n * Define custom log level by setting `self.goog.logLevel`.\n *\n * @example\n *\n * self.goog.logLevel = self.goog.LOG_LEVEL.verbose;\n *\n * @private\n */\nclass LogHelper {\n  /**\n   * LogHelper constructor.\n   */\n  constructor() {\n    this._defaultLogLevel = location.hostname === 'localhost' ? self.goog.LOG_LEVEL.debug : self.goog.LOG_LEVEL.none;\n  }\n\n  /**\n   * The most verbose log level.\n   *\n   * @param {Object} options The options of the log.\n   */\n  log(options) {\n    this._printMessage(self.goog.LOG_LEVEL.verbose, options);\n  }\n\n  /**\n   * Useful for logs that are more exceptional that log()\n   * but not severe.\n   *\n   * @param {Object} options The options of the log.\n   */\n  debug(options) {\n    this._printMessage(self.goog.LOG_LEVEL.debug, options);\n  }\n\n  /**\n   * Warning messages.\n   *\n   * @param {Object} options The options of the log.\n   */\n  warn(options) {\n    this._printMessage(self.goog.LOG_LEVEL.warn, options);\n  }\n\n  /**\n   * Error logs.\n   *\n   * @param {Object} options The options of the log.\n   */\n  error(options) {\n    this._printMessage(self.goog.LOG_LEVEL.error, options);\n  }\n\n  /**\n   * Method to print to the console.\n   * @param {number} logLevel\n   * @param {Object} logOptions\n   */\n  _printMessage(logLevel, logOptions) {\n    if (!this._shouldLogMessage(logLevel, logOptions)) {\n      return;\n    }\n\n    const logGroups = this._getAllLogGroups(logLevel, logOptions);\n    logGroups.print();\n  }\n\n  _getAllLogGroups(logLevel, logOptions) {\n    const topLogGroup = new LogGroup({\n      isPrimary: true,\n      title: 'sw-helpers log.'\n    });\n\n    const primaryMessage = this._getPrimaryMessageDetails(logLevel, logOptions);\n    topLogGroup.addLog(primaryMessage);\n\n    if (logOptions.error) {\n      const errorMessage = {\n        message: logOptions.error,\n        logFunc: console.error\n      };\n      topLogGroup.addLog(errorMessage);\n    }\n\n    const extraInfoGroup = new LogGroup({ title: 'Extra Information.' });\n    if (logOptions.that && logOptions.that.constructor && logOptions.that.constructor.name) {\n      const className = logOptions.that.constructor.name;\n      extraInfoGroup.addLog(this._getKeyValueDetails('class', className));\n    }\n\n    if (logOptions.data) {\n      if (typeof logOptions.data === 'object' && !(logOptions.data instanceof Array)) {\n        Object.keys(logOptions.data).forEach(keyName => {\n          extraInfoGroup.addLog(this._getKeyValueDetails(keyName, logOptions.data[keyName]));\n        });\n      } else {\n        extraInfoGroup.addLog(this._getKeyValueDetails('additionalData', logOptions.data));\n      }\n    }\n\n    topLogGroup.addChildGroup(extraInfoGroup);\n\n    return topLogGroup;\n  }\n\n  _getKeyValueDetails(key, value) {\n    return {\n      message: `%c${key}: `,\n      colors: [`color: ${LIGHT_BLUE}`],\n      args: value\n    };\n  }\n\n  _getPrimaryMessageDetails(logLevel, logOptions) {\n    let logLevelName;\n    let logLevelColor;\n    switch (logLevel) {\n      case self.goog.LOG_LEVEL.verbose:\n        logLevelName = 'Info';\n        logLevelColor = LIGHT_GREY;\n        break;\n      case self.goog.LOG_LEVEL.debug:\n        logLevelName = 'Debug';\n        logLevelColor = LIGHT_GREEN;\n        break;\n      case self.goog.LOG_LEVEL.warn:\n        logLevelName = 'Warn';\n        logLevelColor = LIGHT_YELLOW;\n        break;\n      case self.goog.LOG_LEVEL.error:\n        logLevelName = 'Error';\n        logLevelColor = LIGHT_RED;\n        break;\n    }\n\n    let primaryLogMessage = `%c %c[${logLevelName}]`;\n    const primaryLogColors = [`color: ${LIGHT_GREY}`, `color: ${logLevelColor}`];\n\n    let message;\n    if (typeof logOptions === 'string') {\n      message = logOptions;\n    } else if (logOptions.message) {\n      message = logOptions.message;\n    }\n\n    if (message) {\n      message = message.replace(/\\s+/g, ' ');\n      primaryLogMessage += `%c ${message}`;\n      primaryLogColors.push(`color: ${DARK_GREY}; font-weight: normal`);\n    }\n\n    return {\n      message: primaryLogMessage,\n      colors: primaryLogColors\n    };\n  }\n\n  /**\n   * Test if the message should actually be logged.\n   * @param {number} logLevel The level of the current log to be printed.\n   * @param {Object|String} logOptions The options to log.\n   * @return {boolean} Returns true of the message should be printed.\n   */\n  _shouldLogMessage(logLevel, logOptions) {\n    if (!logOptions) {\n      return false;\n    }\n\n    let minValidLogLevel = this._defaultLogLevel;\n    if (self && self.goog && typeof self.goog.logLevel === 'number') {\n      minValidLogLevel = self.goog.logLevel;\n    }\n\n    if (minValidLogLevel === self.goog.LOG_LEVEL.none || logLevel < minValidLogLevel) {\n      return false;\n    }\n\n    return true;\n  }\n}\n\nvar logHelper = new LogHelper();\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n\n/**\n * NavigationRoute is a helper class to create a [`Route`]{@link Route}\n * that matches browser navigation requests, i.e. requests for a page.\n *\n * It will only match incoming requests whose [`mode`](https://fetch.spec.whatwg.org/#concept-request-mode)\n * is set to `navigate`.\n *\n * You can optionally only apply this route to a subset of navigation requests\n * by using one or both of the `blacklist` and `whitelist` parameters. If\n * both lists are provided, and there's a navigation to a URL which matches\n * both, then the blacklist will take precedence and the request will not be\n * matched by this route. The regular expressions in `whitelist` and `blacklist`\n * are matched against the [`pathname`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/pathname)\n * portion of the requested URL.\n *\n * To match all navigations, use a `whitelist` array containing a RegExp that\n * matches everything, i.e. `[/./]`.\n *\n * @memberof module:sw-routing\n * @extends Route\n *\n * @example\n * // Any navigation requests that match the whitelist (i.e. URLs whose path\n * // starts with /article/) will be handled with the cache entry for\n * // app-shell.html.\n * const route = new goog.routing.NavigationRoute({\n *   whitelist: [new RegExp('^/article/')],\n *   handler: {handle: () => caches.match('app-shell.html')},\n * });\n *\n * const router = new goog.routing.Router();\n * router.registerRoute({route});\n */\nclass NavigationRoute extends Route {\n  /**\n   * Constructor for NavigationRoute.\n   *\n   * @param {Object} input\n   * @param {Array<RegExp>} input.whitelist If any of these patterns match,\n   * the route will handle the request (assuming the blacklist doesn't match).\n   * @param {Array<RegExp>} [input.blacklist] If any of these patterns match,\n   * the route will not handle the request (even if a whitelist entry matches).\n   * @param {module:sw-routing.RouteHandler} input.handler The handler to use to\n   * provide a response if the route matches.\n   */\n  constructor({ whitelist, blacklist, handler } = {}) {\n    assert.isArrayOfClass({ whitelist }, RegExp);\n    if (blacklist) {\n      assert.isArrayOfClass({ blacklist }, RegExp);\n    } else {\n      blacklist = [];\n    }\n\n    const match = ({ event, url }) => {\n      let matched = false;\n      let message;\n\n      if (event.request.mode === 'navigate') {\n        if (whitelist.some(regExp => regExp.test(url.pathname))) {\n          if (blacklist.some(regExp => regExp.test(url.pathname))) {\n            message = `The navigation route is not being used, since the ` + `request URL matches both the whitelist and blacklist.`;\n          } else {\n            message = `The navigation route is being used.`;\n            matched = true;\n          }\n        } else {\n          message = `The navigation route is not being used, since the ` + `URL being navigated to doesn't match the whitelist.`;\n        }\n\n        logHelper.debug({\n          that: this,\n          message,\n          data: { 'request-url': url.href, whitelist, blacklist, handler }\n        });\n      }\n\n      return matched;\n    };\n\n    super({ match, handler, method: 'GET' });\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * RegExpRoute is a helper class to make defining regular expression based\n * [Routes]{@link Route} easy.\n *\n * For same-origin requests, the route will be used if the regular expression\n * matches **any portion** (not necessarily the entirety) of the full request\n * URL.\n *\n * For cross-origin requests, the route will only be used if the regular\n * expression matches **from the start** of the full request URL.\n *\n * For example, assuming that your origin is 'https://example.com', and you use\n * the following regular expressions when constructing your `RegExpRoute`:\n *\n * - `/css$/` **will** match 'https://example.com/path/to/styles.css', but\n * **will not** match 'https://cross-origin.com/path/to/styles.css'\n *\n * - `/^https:\\/\\/cross-origin\\.com/` **will not** match\n * 'https://example.com/path/to/styles.css', but **will** match\n * 'https://cross-origin.com/path/to/styles.css'\n *\n * - `/./` **will** match both 'https://example.com/path/to/styles.css' and\n * 'https://cross-origin.com/path/to/styles.css', because the `.` wildcard\n * matches the first character in both URLs.\n *\n * @memberof module:sw-routing\n * @extends Route\n *\n * @example\n * // Any requests that match the regular expression will match this route, with\n * // the capture groups passed along to the handler as an array via params.\n * const route = new goog.routing.RegExpRoute({\n *   regExp: new RegExp('^https://example.com/path/to/(\\\\w+)'),\n *   handler: {\n *     handle: ({event, params}) => {\n *       // params[0], etc. will be set based on the regexp capture groups.\n *       // Do something that returns a Promise.<Response>, like:\n *       return caches.match(event.request);\n *     },\n *   },\n * });\n *\n * const router = new goog.routing.Router();\n * router.registerRoute({route});\n */\nclass RegExpRoute extends Route {\n  /**\n   * Constructor for RegExpRoute.\n   *\n   * @param {Object} input\n   * @param {RegExp} input.regExp The regular expression to match against URLs.\n   * If the `RegExp` contains [capture groups](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp#grouping-back-references),\n   * then the array of captured values will be passed to the handler via\n   * `params`.\n   * @param {module:sw-routing.RouteHandler} input.handler The handler to use to\n   * provide a response if the route matches.\n   * @param {string} [input.method] Only match requests that use this\n   * HTTP method. Defaults to `'GET'` if not specified.\n   */\n  constructor({ regExp, handler, method }) {\n    assert.isInstance({ regExp }, RegExp);\n\n    const match = ({ url }) => {\n      const result = regExp.exec(url.href);\n\n      // Return null immediately if this route doesn't match.\n      if (!result) {\n        return null;\n      }\n\n      // If this is a cross-origin request, then confirm that the match included\n      // the start of the URL. This means that regular expressions like\n      // /styles.+/ will only match same-origin requests.\n      // See https://github.com/GoogleChrome/sw-helpers/issues/281#issuecomment-285130355\n      if (url.origin !== location.origin && result.index !== 0) {\n        logHelper.debug({\n          that: this,\n          message: `Skipping route, because the RegExp match didn't occur ` + `at the start of the URL.`,\n          data: { url: url.href, regExp }\n        });\n\n        return null;\n      }\n\n      // If the route matches, but there aren't any capture groups defined, then\n      // this will return [], which is truthy and therefore sufficient to\n      // indicate a match.\n      // If there are capture groups, then it will return their values.\n      return result.slice(1);\n    };\n\n    super({ match, handler, method });\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * The Router takes one or more [Routes]{@link Route} and registers a [`fetch`\n * event listener](https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent)\n * that will respond to network requests if there's a matching route.\n *\n * It also allows you to define a \"default\" handler that applies to any requests\n * that don't explicitly match a `Route`, and a \"catch\" handler that responds\n * to any requests that throw an exception while being routed.\n *\n * @memberof module:sw-routing\n *\n * @example\n * // The following example sets up two routes, one to match requests with\n * // \"assets\" in their URL, and the other for requests with \"images\", along\n * // different runtime caching handlers for each.\n * // Both the routes are registered with the router, and any requests that\n * // don't match either route will be handled using the default NetworkFirst\n * // strategy.\n * const assetRoute = new RegExpRoute({\n *   regExp: /assets/,\n *   handler: new goog.runtimeCaching.StaleWhileRevalidate(),\n * });\n * const imageRoute = new RegExpRoute({\n *   regExp: /images/,\n *   handler: new goog.runtimeCaching.CacheFirst(),\n * });\n *\n * const router = new goog.routing.Router();\n * router.registerRoutes({routes: [assetRoute, imageRoute]});\n * router.setDefaultHandler({handler: new goog.runtimeCaching.NetworkFirst()});\n */\nclass Router {\n  /**\n   * Start with an empty array of routes, and set up the fetch handler.\n   */\n  constructor({ handleFetch } = {}) {\n    if (typeof handleFetch === 'undefined') {\n      handleFetch = true;\n    }\n\n    // _routes will contain a mapping of HTTP method name ('GET', etc.) to an\n    // array of all the corresponding Route instances that are registered.\n    this._routes = new Map();\n\n    if (handleFetch) {\n      this._addFetchListener();\n    }\n  }\n\n  /**\n   * This method will actually add the fetch event listener.\n   */\n  _addFetchListener() {\n    self.addEventListener('fetch', event => {\n      const url = new URL(event.request.url);\n      if (!url.protocol.startsWith('http')) {\n        logHelper.log({\n          that: this,\n          message: 'URL does not start with HTTP and so not passing ' + 'through the router.',\n          data: {\n            request: event.request\n          }\n        });\n        return;\n      }\n\n      let responsePromise;\n      let matchingRoute;\n      for (let route of this._routes.get(event.request.method) || []) {\n        const matchResult = route.match({ url, event });\n        if (matchResult) {\n          matchingRoute = route;\n\n          logHelper.log({\n            that: this,\n            message: 'The router found a matching route.',\n            data: {\n              route: matchingRoute,\n              request: event.request\n            }\n          });\n\n          let params = matchResult;\n\n          if (Array.isArray(params) && params.length === 0) {\n            // Instead of passing an empty array in as params, use undefined.\n            params = undefined;\n          } else if (params.constructor === Object && Object.keys(params).length === 0) {\n            // Instead of passing an empty object in as params, use undefined.\n            params = undefined;\n          }\n\n          responsePromise = route.handler.handle({ url, event, params });\n          break;\n        }\n      }\n\n      if (!responsePromise && this.defaultHandler) {\n        responsePromise = this.defaultHandler.handle({ url, event });\n      }\n\n      if (responsePromise && this.catchHandler) {\n        responsePromise = responsePromise.catch(error => {\n          return this.catchHandler.handle({ url, event, error });\n        });\n      }\n\n      if (responsePromise) {\n        event.respondWith(responsePromise.then(response => {\n          logHelper.debug({\n            that: this,\n            message: 'The router is managing a route with a response.',\n            data: {\n              route: matchingRoute,\n              request: event.request,\n              response: response\n            }\n          });\n\n          return response;\n        }));\n      }\n    });\n  }\n\n  /**\n   * An optional {RouteHandler} that's called by default when no routes\n   * explicitly match the incoming request.\n   *\n   * If the default is not provided, unmatched requests will go against the\n   * network as if there were no service worker present.\n   *\n   * @example\n   * router.setDefaultHandler({\n   *   handler: new goog.runtimeCaching.NetworkFirst()\n   * });\n   *\n   * @param {Object} input\n   * @param {module:sw-routing.RouteHandler} input.handler The handler to use to\n   * provide a response.\n   */\n  setDefaultHandler({ handler } = {}) {\n    this.defaultHandler = normalizeHandler(handler);\n  }\n\n  /**\n   * If a Route throws an error while handling a request, this {RouteHandler}\n   * will be called and given a chance to provide a response.\n   *\n   * @example\n   * router.setCatchHandler(({event}) => {\n   *   if (event.request.mode === 'navigate') {\n   *     return caches.match('/error-page.html');\n   *   }\n   *   return Response.error();\n   * });\n   *\n   * @param {Object} input\n   * @param {module:sw-routing.RouteHandler} input.handler The handler to use to\n   * provide a response.\n   */\n  setCatchHandler({ handler } = {}) {\n    this.catchHandler = normalizeHandler(handler);\n  }\n\n  /**\n   * Register routes will take an array of Routes to register with the\n   * router.\n   *\n   * @example\n   * router.registerRoutes({\n   *   routes: [\n   *     new RegExpRoute({ ... }),\n   *     new ExpressRoute({ ... }),\n   *     new Route({ ... }),\n   *   ]\n   * });\n   *\n   * @param {Object} input\n   * @param {Array<Route>} input.routes An array of routes to\n   * register.\n   */\n  registerRoutes({ routes } = {}) {\n    assert.isArrayOfClass({ routes }, Route);\n\n    for (let route of routes) {\n      if (!this._routes.has(route.method)) {\n        this._routes.set(route.method, []);\n      }\n\n      // Give precedence to the most recent route by listing it first.\n      this._routes.get(route.method).unshift(route);\n    }\n  }\n\n  /**\n   * Registers a single route with the router.\n   *\n   * @example\n   * router.registerRoute({\n   *   route: new Route({ ... })\n   * });\n   *\n   * @param {Object} input\n   * @param {module:sw-routing.Route} input.route The route to register.\n   */\n  registerRoute({ route } = {}) {\n    assert.isInstance({ route }, Route);\n\n    this.registerRoutes({ routes: [route] });\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * # sw-routing\n *\n * A service worker helper library to route request URLs to handlers.\n *\n * @module sw-routing\n */\n\n/**\n * A handler that can be automatically invoked by a route, and knows how to\n * respond to a request. It can either be a standalone function or a subclass of\n * {@link module:sw-runtime-caching.Handler|Handler}.\n *\n * @callback RouteHandler\n * @param {Object} input\n * @param {URL} input.url The request's URL.\n * @param {FetchEvent} input.event The event that triggered the `fetch` handler.\n * @param {Array<Object>} input.params Any additional parameters that the\n * {@link module:sw-routing.Route|Route} provides, such as named parameters in\n * an {@link module:sw-routing.ExpressRoute|ExpressRoute}.\n * @return {Promise<Response>} The response that will fulfill the request.\n * @memberof module:sw-routing\n */\n\n/**\n * A function that can be automatically invoked by a route to determine whether\n * or not an incoming network request should trigger the route's handler.\n *\n * @callback Matcher\n * @param {Object} input\n * @param {URL} input.url The request's URL.\n * @param {FetchEvent} input.event The event that triggered the `fetch` handler.\n * @return {Array<Object>|null} To signify a match, return a (possibly empty)\n * array of values which will be passed in a params to the\n * {@link module:sw-routing.RouteHandler|RouteHandler}.\n * Otherwise, return null if the route shouldn't match.\n * @memberof module:sw-routing\n */\n\nexports.ExpressRoute = ExpressRoute;\nexports.NavigationRoute = NavigationRoute;\nexports.RegExpRoute = RegExpRoute;\nexports.Route = Route;\nexports.Router = Router;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"]}