<!DOCTYPE html>
<html>

  








<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>sw-cli</title>
  <meta name="description" content="(Currently Work in Progress) Service Worker helper libraries. ">

  <!-- The docs server over HTTPS, but site.github.url points to HTTP resouce causing mixed content -->
  <link rel="canonical" href="/sw-cli.html">
  <link rel="alternate" type="application/rss+xml" title="sw-helpers" href="/feed.xml">

  <link rel="shortcut icon" href="/themes/images/favicon.ico">

  <!-- Stylesheet -->
  <link href="https://fonts.googleapis.com/css?family=Cutive+Mono|Open+Sans:300,300i,400,600,700" rel="stylesheet">
  <link href="/themes/styles/main.css" rel="stylesheet" type="text/css">

  
</head>


  <body>

    

















<section class="navigation-container">

  <!-- Hamburger Menu -->
  <button class="svg-btn navigation-open-btn js-menu-btn">
    <svg height="30" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
        <path d="M0 0h24v24H0z" fill="none"/>
        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
    </svg>
  </button>

  <nav class="navigation-links js-nav-drawer">
      <!-- Logo Header at Top of Nav Drawer -->
      <section class="nav-drawer-header">
        <img class="nav-drawer-header__logo" src="/themes/images/workbox-logo-grey-small.min.svg" alt="Small Workbox Logo" />

        <button class="svg-btn navigation-close-btn js-menu-close-btn">
          <svg height="30" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            <path d="M0 0h24v24H0z" fill="none"/>
          </svg>
        </button>
      </section>

      <!-- Actual Links -->
      <ul>
        
          
<li><a href="/">Getting Started</a></li>


        
          
<li><a href="/sw-cli">sw-cli</a></li>


        
          
<li><a href="/sw-build">sw-build</a></li>


        
          
<li><a href="/sw-lib">sw-lib</a></li>


        
          
<li class="drop-down-container js-drop-down-wrapper">
  <span class="navigation-drop-down-btn js-drop-down-btn">Recipes</span>
  <ul class="drop-down-list js-drop-down-list">
  
    
<li><a href="/recipes/webpack">Web Pack</a></li>


  
    
<li><a href="/recipes/gulp">Gulp</a></li>


  
    
<li><a href="/recipes/rollup">Rollup</a></li>


  
    
<li><a href="/recipes/grunt">Grunt</a></li>


  
  </ul>
</li>



        
          
<li><a href="/examples">Examples</a></li>


        
          
<li class="drop-down-container js-drop-down-wrapper">
  <span class="navigation-drop-down-btn js-drop-down-btn">Reference</span>
  <ul class="drop-down-list js-drop-down-list">
  
    
<li><a href="/reference-docs/stable/latest/module-sw-background-sync-queue.html">sw-background-sync-queue</a></li>


  
    
<li><a href="/reference-docs/stable/latest/module-sw-broadcast-cache-update.html">sw-broadcast-cache-update</a></li>


  
    
<li><a href="/reference-docs/stable/latest/module-sw-build.html">sw-build</a></li>


  
    
<li><a href="/reference-docs/stable/latest/module-sw-cache-expiration.html">sw-cache-expiration</a></li>


  
    
<li><a href="/reference-docs/stable/latest/module-sw-cacheable-response.html">sw-cacheable-response</a></li>


  
    
<li><a href="/reference-docs/stable/latest/module-sw-lib.html">sw-lib</a></li>


  
    
<li><a href="/reference-docs/stable/latest/module-sw-offline-google-analytics.html">sw-offline-google-analytics</a></li>


  
    
<li><a href="/reference-docs/stable/latest/module-sw-precaching.html">sw-precaching</a></li>


  
    
<li><a href="/reference-docs/stable/latest/module-sw-routing.html">sw-routing</a></li>


  
    
<li><a href="/reference-docs/stable/latest/module-sw-runtime-caching.html">sw-runtime-caching</a></li>


  
  </ul>
</li>



        
      </ul>
    </nav>

    <div class="nav-backdrop js-nav-backdrop"></div>

</section>


<header class="primary-header">
  <div class="primary-header__inner-section">
    <h1></h1>
  </div>
</header>


<main>
  <h1 id="sw-cli">sw-cli</h1>

<p>Get a precaching service worker in about two minutes with the <code class="highlighter-rouge">sw-cli</code> module.
Simply install the module then run it from a command line.</p>

<h2 id="install">Install</h2>

<ol>
  <li><a href="https://nodejs.org/en/">Install Node.js</a>.</li>
  <li>Install the module with NPM.</li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>npm install -g sw-cli
</code></pre>
</div>

<h2 id="generating-a-service-worker">Generating a Service Worker</h2>

<p>To generate a service worker, run <code class="highlighter-rouge">sw-cli</code> with the ‘generate:sw’ command in the root of
your project.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sw-cli generate:sw
</code></pre>
</div>

<p>This will ask a range of questions about your web app, such as which directory
contains the assets for your site, and which assets you’d like to cache.</p>

<p><img src="./images/sw-cli-questions.png" alt="Screenshot of the sw-cli command." /></p>

<p>After the command has run you’ll have two new files, a
<code class="highlighter-rouge">sw-lib.vX.X.X.min.js</code> and <code class="highlighter-rouge">sw.js</code> file (unless you changed
the file name).</p>

<h2 id="creating-a-config-file">Creating a Config File</h2>

<p>One of the questions asked by <code class="highlighter-rouge">sw-cli generate:sw</code> is whether you’d like to save
your responses to a configuration file. Answering <code class="highlighter-rouge">Y</code> will save your responses
to <code class="highlighter-rouge">sw-cli-config.json</code>. Subsequent runs of the cli will regenerate the service
worker based on the config file, which makes building faster.</p>

<h2 id="using-the-generated-service-worker">Using the Generated Service Worker</h2>

<p>To use the service worker, you’ll need to register your
newly generated service worker file in your web page,
which you can do like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>if(navigator.serviceworker) {
  navigator.serviceworker.register('/sw.js')
  .catch(function(err) {
    console.error('Unable to register service worker.', err);
  });
}
</code></pre>
</div>

<p>With this, the browser will register your <code class="highlighter-rouge">sw.js</code> which
will preache the assets in your app and serve them
from the cache.</p>

<h2 id="what-is-in-swjs">What is in sw.js?</h2>

<p>For those who are curious, let’s look at what’s in the
generated service worker.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>importScripts('sw-lib.v0.0.13.min.js');

/**
 * DO NOT EDIT THE FILE MANIFEST ENTRY
 *
 * .....
 */
const fileManifest = [
  {
    "url": "/index.html",
    "revision": "b3e78d93b20c49d0c927050682c99df3"
  },
  {
    "url": "/images/hamburger.svg",
    "revision": "d2cb0dda3e8313b990e8dcf5e25d2d0f"
  },
  ....
];

self.goog.swlib.precache(fileManifest);
</code></pre>
</div>

<p>The service worker imports the <code class="highlighter-rouge">sw-lib</code> file which is
a library that manages the precaching and returning
of assets when the browser requests them.</p>

<p>The <code class="highlighter-rouge">fileManifest</code> is an array of all the assets in your
web app. Each file entry consists of a URL and a revision.
This is used to download the files whenever they change.</p>

<p>The service worker then calls
<code class="highlighter-rouge">goog.swlib.precache()</code> which will download
all the assets during the service worker install event.</p>

<h2 id="what-next">What Next?</h2>

<p>If you only need precaching and serving of assets then
you can carry on using <code class="highlighter-rouge">sw-cli</code> as is.</p>

<p>Otherwise maybe you’ll want to explore one of the following.</p>

<h3 id="generating-sw-in-a-build-process">Generating SW in a Build Process</h3>

<p>If you have a build process, you might want to use the
<code class="highlighter-rouge">sw-build</code> module instead of <code class="highlighter-rouge">sw-cli</code>.</p>

<p>The <code class="highlighter-rouge">sw-build</code> module allows you to generate the service worker<br />
programmatically.</p>

<p><a href="../reference-docs/stable/latest/module-sw-build.html#main">Learn More About sw-build Here</a></p>

<h3 id="precaching-in-your-own-service-worker">Precaching in Your Own Service Worker</h3>

<p>Instead of generating a service worker, you may want some
of the features provided by <code class="highlighter-rouge">sw-cli</code> but added to your
own service worker.</p>

<p>For this you have a few options.</p>

<p>Both <code class="highlighter-rouge">sw-cli</code> and <code class="highlighter-rouge">sw-build</code> can be used to produce a
list of assets in your web app with revision
information which can be used for precaching. We have
<a href="../recipes#main">recipes on how to do this</a>.</p>

<p>You can then use <code class="highlighter-rouge">sw-lib</code> to perform the precaching and
you can define custom routes and add anything else you
desire to your service worker.</p>

<p><a href="../reference-docs/stable/latest/module-sw-lib.html#main">Learn More About sw-lib Here</a></p>

</main>

<footer>
  <a href="https://GoogleChrome.github.io/workbox" class="footer__btn footer__workbox-btn" role="button" title="Workbox">
    <img src="/themes/images/workbox-logo-white.min.svg" alt="Workbox Logo" />
  </a>
  <div class="footer__right-logos">
    <div class="footer__logo-row">
      <a href="https://twitter.com/ChromiumDev" class="footer__btn footer__twitter-btn" role="button" title="Twitter">
        <img src="/themes/images/twitter-logo.min.svg" alt="Twitter Logo" />
      </a>
      <a href="https://github.com/GoogleChrome/sw-helpers" class="footer__btn footer__github-btn" role="button" title="GitHub">
        <img src="/themes/images/github-logo.min.svg" alt="Github Logo" />
      </a>
    </div>
    <div class="footer__logo-row">
      <a class="google-dev-logo footer__btn" href="https://developers.google.com/web/">
        <img src="/themes/images/google-dev-logo.min.svg" alt="Google Developers Logo" />
      </a>
    </div>
  </div>
</footer>



  </body>

  








<script src="/themes/scripts/detabinator.js" rel="stylesheet" async defer></script>
<script src="/themes/scripts/nav-drawer.js" rel="stylesheet" async defer></script>
<script src="/themes/scripts/jsdocs-collapse.js" rel="stylesheet" async defer></script>
<script src="/themes/scripts/navigation-controller.js" rel="stylesheet" async defer></script>
<script src="/themes/third_party/anchor-js/anchor.min.js" rel="stylesheet" id="anchorjsscript" async defer></script>


</html>
