---
layout: jsdoc
title: "Module: sw-offline-google-analytics"
jsdocNav: 
  - Modules:
    - <a href="module-sw-background-sync-queue.html#main">sw-background-sync-queue</a>
    - <a href="module-sw-broadcast-cache-update.html#main">sw-broadcast-cache-update</a>
    - <a href="module-sw-build.html#main">sw-build</a>
    - <a href="module-sw-cache-expiration.html#main">sw-cache-expiration</a>
    - <a href="module-sw-cacheable-response.html#main">sw-cacheable-response</a>
    - <a href="module-sw-lib.html#main">sw-lib</a>
    - <a href="module-sw-offline-google-analytics.html#main">sw-offline-google-analytics</a>
    - <a href="module-sw-precaching.html#main">sw-precaching</a>
    - <a href="module-sw-routing.html#main">sw-routing</a>
    - <a href="module-sw-runtime-caching.html#main">sw-runtime-caching</a>
---







    
        
            
        
    

    
        
            <div class="description"><p>In order to use the library, call<code>goog.offlineGoogleAnalytics.initialize()</code>.
It will take care of setting up service worker <code>fetch</code> handlers to ensure
that the Google Analytics JavaScript is available offline, and that any
Google Analytics requests made while offline are saved (using <code>IndexedDB</code>)
and retried the next time the service worker starts up.</p></div>
        

        
            

<div class="collapsing-entry method-type-module ">



<div class="collapse-details js-collapse-details">




    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>// This code should live inside your service worker JavaScript, ideally
// before any other 'fetch' event handlers are defined:

// First, import the library into the service worker global scope:
importScripts('path/to/offline-google-analytics-import.js');

// Then, call goog.offlineGoogleAnalytics.initialize():
goog.offlineGoogleAnalytics.initialize();

// At this point, implement any other service worker caching strategies
// appropriate for your web app.</code></pre>

    <pre class="prettyprint"><code>// If you need to specify parameters to be sent with each hit, you can use
// the `parameterOverrides` configuration option. This is useful in cases
// where you want to set a custom dimension on all hits sent by the service
// worker to differentiate them in your reports later.
goog.offlineGoogleAnalytics.initialize({
  parameterOverrides: {
    cd1: 'replay'
  }
});</code></pre>

    <pre class="prettyprint"><code>// In situations where you need to programmatically modify a hit's
// parameters you can use the `hitFilter` option. One example of when this
// might be useful is if you wanted to track the amount of time that elapsed
// between when the hit was attempted and when it was successfully replayed.
goog.offlineGoogleAnalytics.initialize({
  hitFilter: searchParams =>
    // Sets the `qt` param as a custom metric.
    const qt = searchParams.get('qt');
    searchParams.set('cm1', qt);
  }
});</code></pre>



<table class="method-info-table">

  

  

  



<!--
<tr>
<th>Details</th>
<td>


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>

</td>
</tr>
-->













</table>

</div>

</div>

        
    

    

    

     

    

    

    
        <h2 class="subsection-title">Instance Methods</h2>

        <div class="subsection-methods">
        
            

<div class="collapsing-entry method-type-function ">


    <h4 class="js-collapse-title" id=".goog.offlineGoogleAnalytics.initialize"><span class="type-attribs">(static) </span><span class="this">this.</span>goog.offlineGoogleAnalytics.initialize<span class="signature">(<span class="signature-args">config</span>)</span><span class="type-signature"></span></h4>


<div class="collapse-details js-collapse-details">


  

  <div class="description">
    
  </div>




<table class="method-info-table">

  

  

  


  <tr>
    <th>Parameters</th>
    <td>
      

<table class="params">
    

        <tr>
            
              <td class="name">config</td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>



            

            
                
                

                

                
                
                  <span class="param-attributes">(Optional)</span>
                  
            
            </td>

            
              <td></td>
            

            <tr>
              <td></td>
              <td class="description last">
                
                
                  <h6>Properties</h6>
                  

<table class="params">
    

        <tr>
            
              <td class="name">parameterOverrides</td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>



            

            
                
                

                

                
                
                  <span class="param-attributes">(Optional)</span>
                  
            
            </td>

            
              <td></td>
            

            <tr>
              <td></td>
              <td class="description last">
                <p><a href="https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters">Measurement Protocol parameters</a>,
                   expressed as key/value pairs, to be added to replayed
                   Google Analytics requests. This can be used to, e.g., set
                   a custom dimension indicating that the request was
                   replayed.</p>
                
              </td>
            </tr>
        </tr>

    

        <tr>
            
              <td class="name">hitFilter</td>
            

            <td class="type">
            
                
<span class="param-type">function</span>



            

            
                
                

                

                
                
                  <span class="param-attributes">(Optional)</span>
                  
            
            </td>

            
              <td></td>
            

            <tr>
              <td></td>
              <td class="description last">
                <p>A function that allows you to modify the hit parameters
                   prior to replaying the hit. The function is invoked with
                   the original hit's URLSearchParams object as its only
                   argument. To abort the hit and prevent it from being
                   replayed, throw an error.</p>
                
              </td>
            </tr>
        </tr>

    
</table>

                
              </td>
            </tr>
        </tr>

    
</table>

    </td>
  </tr>


<!--
<tr>
<th>Details</th>
<td>


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>

</td>
</tr>
-->













</table>

</div>

</div>

        
        </div>