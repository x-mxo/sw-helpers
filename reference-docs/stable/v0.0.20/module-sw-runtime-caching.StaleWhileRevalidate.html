---
layout: jsdoc
title: "Class: StaleWhileRevalidate"
jsdocNav: 
  - Modules:
    - <a href="module-sw-background-sync-queue.html#main">sw-background-sync-queue</a>
    - <a href="module-sw-broadcast-cache-update.html#main">sw-broadcast-cache-update</a>
    - <a href="module-sw-build.html#main">sw-build</a>
    - <a href="module-sw-cache-expiration.html#main">sw-cache-expiration</a>
    - <a href="module-sw-cacheable-response.html#main">sw-cacheable-response</a>
    - <a href="module-sw-lib.html#main">sw-lib</a>
    - <a href="module-sw-offline-google-analytics.html#main">sw-offline-google-analytics</a>
    - <a href="module-sw-precaching.html#main">sw-precaching</a>
    - <a href="module-sw-routing.html#main">sw-routing</a>
    - <a href="module-sw-runtime-caching.html#main">sw-runtime-caching</a>
---







    
        <h2>StaleWhileRevalidate <span class="extends">extends</span> Handler</span>
        </h2>
        
            <p>An implementation of a <a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#stale-while-revalidate">stale-while-revalidate</a>
request strategy.</p>
<p>Resources are requested from both the cache and the network in parallel, then
responds with the cached version. The cache is replaced with whatever returns
from the network. In addition to updating the appropriate caches, it will
also trigger any appropriate plugins defined in the underlying
<code>RequestWrapper</code>.</p>
<p>This strategy is the closest equivalent to the sw-toolbox
<a href="https://googlechrome.github.io/sw-toolbox/api.html#toolboxfastest">fastest</a>
strategy.</p>
<p>By default, <code>StaleWhileRevalidate</code> will cache responses with a 200 status
code as well as <a href="http://stackoverflow.com/q/39109789">opaque responses</a>
(responses from cross-origin servers which don't support
<a href="https://enable-cors.org/">CORS</a>). You can override this default by passing
in a <code>RequestWrapper</code> that includes an appropriately-configured
<code>CacheableResponsePlugin</code>.</p>
        
    

    
      
          <h3>Example</h3>
          
    <pre class="prettyprint"><code>// Set up a route to match any requests made for URLs that end in .txt.
// The requests are handled with a stale-while-revalidate strategy.
const route = new goog.routing.RegExpRoute({
  regExp: /\.txt$/,
  handler: new goog.runtimeCaching.StaleWhileRevalidate(),
});

const router = new goog.routing.Router();
router.registerRoute({route});</code></pre>

      

      
        <h2 class="subsection-title">Constructor</h2>

        <div class="subsection-constructor">
        

<div class="collapsing-entry method-type-class start-open">


    <h4 class="js-collapse-title" id="StaleWhileRevalidate">new StaleWhileRevalidate<span class="signature">(<span class="signature-args">input</span>)</span><span class="type-signature"></span></h4>


<div class="collapse-details js-collapse-details">


  

  <div class="description">
    <p>Constructor for a new StaleWhileRevalidate instance.</p>
  </div>




<table class="method-info-table">

  

  

  


  <tr>
    <th>Parameters</th>
    <td>
      

<table class="params">
    

        <tr>
            
              <td class="name">input</td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>



            

            
            </td>

            
              <td></td>
            

            <tr>
              <td></td>
              <td class="description last">
                
                
                  <h6>Properties</h6>
                  

<table class="params">
    

        <tr>
            
              <td class="name">requestWrapper</td>
            

            <td class="type">
            
                
<span class="param-type">RequestWrapper</span>



            

            
                
                

                

                
                
                  <span class="param-attributes">(Optional)</span>
                  
            
            </td>

            
              <td></td>
            

            <tr>
              <td></td>
              <td class="description last">
                <p>An optional <code>RequestWrapper</code>
       that is used to configure the cache name and request plugins. If
       not provided, a new <code>RequestWrapper</code> using the
       <a href="#defaultCacheName">default cache name</a> will be used.</p>
                
              </td>
            </tr>
        </tr>

    
</table>

                
              </td>
            </tr>
        </tr>

    
</table>

    </td>
  </tr>


<!--
<tr>
<th>Details</th>
<td>


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>

</td>
</tr>
-->













</table>

</div>

</div>

        </div>
      

    

    

    

     

    

    

    
        <h2 class="subsection-title">Instance Methods</h2>

        <div class="subsection-methods">
        
            

<div class="collapsing-entry method-type-function ">


    <h4 class="js-collapse-title" id="handle"><span class="this">this.</span>handle<span class="signature">(<span class="signature-args">input</span>)</span><span class="type-signature"> <span class="return-arrow">&rarr;</span> Promise.&lt;Response></span></h4>


<div class="collapse-details js-collapse-details">


  

  <div class="description">
    <p>The handle method will be called by the
<a href="module-sw-routing.Route.html#main">Route</a> class when a route matches a request.</p>
  </div>




<table class="method-info-table">

  

  

  


  <tr>
    <th>Parameters</th>
    <td>
      

<table class="params">
    

        <tr>
            
              <td class="name">input</td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>



            

            
            </td>

            
              <td></td>
            

            <tr>
              <td></td>
              <td class="description last">
                
                
                  <h6>Properties</h6>
                  

<table class="params">
    

        <tr>
            
              <td class="name">event</td>
            

            <td class="type">
            
                
<span class="param-type">FetchEvent</span>



            

            
            </td>

            
              <td></td>
            

            <tr>
              <td></td>
              <td class="description last">
                <p>The event that triggered the service
       worker's fetch handler.</p>
                
              </td>
            </tr>
        </tr>

    
</table>

                
              </td>
            </tr>
        </tr>

    
</table>

    </td>
  </tr>


<!--
<tr>
<th>Details</th>
<td>


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>

</td>
</tr>
-->












  <tr>
  <th>Returns</th>
  <td>
  
          



<span class="param-type">Promise.&lt;Response></span>





<div class="param-desc">
    <p>The response from the cache, if present, or
         from the network if not.</p>
</div>


      
  </td>
  </tr>


</table>

</div>

</div>

        
        </div>